!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){(()=>{const{renderer:renderer}=require("./src/renderer"),container=document.getElementById("container"),instance=renderer({minScale:.1,maxScale:30,element:container.children[0],scaleSensitivity:50});container.addEventListener("wheel",event=>{event.ctrlKey&&(event.preventDefault(),instance.zoom({deltaScale:Math.sign(event.deltaY)>0?-1:1,x:event.pageX,y:event.pageY}))}),container.addEventListener("dblclick",()=>{instance.panTo({originX:0,originY:0,scale:1})}),container.addEventListener("mousemove",event=>{event.shiftKey&&(event.preventDefault(),instance.panBy({originX:event.movementX,originY:event.movementY}))})})()},{"./src/renderer":2}],2:[function(require,module,exports){const getMatrix=({scale:scale,translateX:translateX,translateY:translateY})=>`matrix(${scale}, 0, 0, ${scale}, ${translateX}, ${translateY})`,pan=({state:state,originX:originX,originY:originY})=>{state.transformation.translateX+=originX,state.transformation.translateY+=originY,state.element.style.transform=getMatrix({scale:state.transformation.scale,translateX:state.transformation.translateX,translateY:state.transformation.translateY})},canZoom=state=>({zoom:({x:x,y:y,deltaScale:deltaScale})=>{const{left:left,top:top}=state.element.getBoundingClientRect(),{minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity}=state,[scale,newScale]=(({scale:scale,minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity,deltaScale:deltaScale})=>{let newScale=scale+deltaScale/(scaleSensitivity/scale);return[scale,newScale=Math.max(minScale,Math.min(newScale,maxScale))]})({scale:state.transformation.scale,deltaScale:deltaScale,minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity}),originX=x-left,originY=y-top,newOriginX=originX/scale,newOriginY=originY/scale,translate=(({minScale:minScale,maxScale:maxScale,scale:scale})=>({pos:pos,prevPos:prevPos,translate:translate})=>(({minScale:minScale,maxScale:maxScale,scale:scale})=>scale<=maxScale&&scale>=minScale)({minScale:minScale,maxScale:maxScale,scale:scale})&&(({pos:pos,prevPos:prevPos})=>pos!==prevPos)({pos:pos,prevPos:prevPos})?translate+(pos-prevPos*scale)*(1-1/scale):translate)({scale:scale,minScale:minScale,maxScale:maxScale}),translateX=translate({pos:originX,prevPos:state.transformation.originX,translate:state.transformation.translateX}),translateY=translate({pos:originY,prevPos:state.transformation.originY,translate:state.transformation.translateY});state.element.style.transformOrigin=`${newOriginX}px ${newOriginY}px`,state.element.style.transform=getMatrix({scale:newScale,translateX:translateX,translateY:translateY}),state.transformation={originX:newOriginX,originY:newOriginY,translateX:translateX,translateY:translateY,scale:newScale}}});module.exports={renderer:({minScale:minScale,maxScale:maxScale,element:element,scaleSensitivity:scaleSensitivity=10})=>{const state={element:element,minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity,transformation:{originX:0,originY:0,translateX:0,translateY:0,scale:1}};return Object.assign({},canZoom(state),(state=>({panBy:({originX:originX,originY:originY})=>pan({state:state,originX:originX,originY:originY}),panTo:({originX:originX,originY:originY,scale:scale})=>{state.transformation.scale=scale,pan({state:state,originX:originX-state.transformation.translateX,originY:originY-state.transformation.translateY})}}))(state))}}},{}]},{},[1]);
